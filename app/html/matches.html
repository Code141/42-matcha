<div class="container" id="form_container">
	<form action="<?php echo SITE_ROOT;?>matches/main/1" method="post" >
		<div id="filter_container">
		<?php foreach($this->data['filters'] as $name => $checked)	{ ?>
		<input type="checkbox" name="<?php echo $name;?>" id="<?php echo $name;?>" value="1"<?php if ($checked) echo "checked"?>>
		<label for="<?php echo $name;?>"><?php echo $name;?></label> 
			<?php } ?>
			<div class="container">
				<p>Filter by age</p>
				<p>Between</p> 
				<p>
				<select name="age_select_from">
					<?php for($i=0;$i<120;$i+=10){?>
					<option value=<?php echo $i;?>><?php echo $i;?></option>
					<?php } ?>
				</select>
				and 
				<select name="age_select_to">
					<?php for($i=120;$i>0;$i-=10){?>
					<option value=<?php echo $i;?>><?php echo $i;?></option>
					<?php } ?>
				</select>
				</p>
				<p>years old</p>
			</div>
			<div class="container">
				<p>Order by birthdate</p>
				<select name="birthdate_order">
					<option value=""></option>
					<option value="ASC">ASC</option>
					<option value="DESC">DESC</option>
				</select>
			</div>
			<div class="container"  id="tag_container">
				<p>Filter by tags
				<input type="text" id="search_tags" placeholder="Search for tags.."></p>
				<div id="tag_list">
					<ul id="myUL">
						<?php foreach($this->data['all_tags'] as $tag) { ?>
						<li title="<?php echo $tag['tag_name'];?>">
							<input type="checkbox" id="<?php echo $tag['tag_name'];?>" name="tag_<?php echo $tag['tag_name'];?>" value = "<?php echo $tag['id'];?>"<?php if (in_array($tag['id'],$this->data['filter_tags'])) echo "checked";?>>
							<label for="<?php echo $tag['tag_name'];?>">#<?php echo $tag['tag_name']?></label>
						</li>
						<?php  }?>
					</ul>
				</div>
				<div>
					<button id="uncheck_tags">Clear tag filters</button>
				</div>
			</div>
			</div>
		<button id="search_button" type="submit">SEARCH FOR THE PERFECT MATCH</button>
	</form>
</div>
<div class='container' id="profils">
	<?php foreach($this->data['executed'] as $profil) { ?>
	<article>
		<p><?php echo $profil['username']?></p>
		<p>gender : <?php echo $profil['gender_name']?></p>
		<p>gender identity : <?php echo $profil['gender_identity_name']?></p>
		<p><?php echo $profil['birthdate']?></p>
	</article>
	<?php	} ?>
</div>

<script>
document.getElementById("search_tags").addEventListener("keyup", function(event){
	//function search_tags() {
	// Declare variables
	var input_bar, filter, ul, li, a, i;
	input_bar = document.getElementById('search_tags');
	filter = input_bar.value.toUpperCase();
	ul = document.getElementById("myUL");
	li = ul.getElementsByTagName('li');

	// Loop through all list items, and hide those who don't match the search query
	for (i = 0; i < li.length; i++) {
		input = li[i].getElementsByTagName("input")[0];
		if (input.name.toUpperCase().indexOf(filter) > -1) {
			li[i].style.display = "";
		} else {
			li[i].style.display = "none";
		}
	}
});

document.getElementById("uncheck_tags").addEventListener("click", function(event){
	event.preventDefault()
		ul = document.getElementById("myUL");
	li = ul.getElementsByTagName('li');
	for (i = 0; i < li.length; i++) {
		input = li[i].getElementsByTagName("input")[0].checked = false;
		console.log(input);
	}
});
</script>


